@page "/warehouse/create"

@using LogiEdge.WarehouseService.Services
@using LogiEdge.CustomerService.Data
@using LogiEdge.CustomerService.Services
@using LogiEdge.WarehouseService.Data
@using LogiEdge.WarehouseService.Persistence
@using Microsoft.AspNetCore.Components.Forms
@using Microsoft.EntityFrameworkCore

@inject IDbContextFactory<WarehouseDbContext> WarehouseDbContextFactory;
@inject CustomerManagementService CustomerService;

@code {
    private string warehouseName = string.Empty;

    private string feedback = string.Empty;

    private void CreateNewWarehouse()
    {
        WarehouseDbContext warehouseDb = WarehouseDbContextFactory.CreateDbContext();

        if(string.IsNullOrEmpty(warehouseName))
        {
            feedback = "A name must be set for the warehouse!";
            return;
        }

        Warehouse newWarehouse = new()
        {
            Name = warehouseName,
        };
        newWarehouse = warehouseDb.Warehouses.Add(newWarehouse).Entity;
    }
}

<h3>Create New Warehouse</h3>

<label>Warehouse Name:</label>
<InputText @bind-Value="warehouseName"></InputText>
<br />

<p style="color:red;">@feedback</p>
<br />
<button @onclick="CreateNewWarehouse">Create Warehouse</button>