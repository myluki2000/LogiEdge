@using Microsoft.AspNetCore.Components.Forms
@code {
    [Parameter]
    public bool IsEditing { get; set; }
    [Parameter]
    public required string PropertyName { get; set; }
    [Parameter]
    public required string? PropertyValue { get; set; }

    [Parameter]
    public EventCallback<PropertyFilterBadgeComponent> OnRemoveFilter { get; set; }
    [Parameter]
    public EventCallback<PropertyFilterBadgeComponent> OnEditingRequested { get; set; }
    [Parameter]
    public EventCallback<string?> OnEditingFinished { get; set; }

    private void EditParamBadgeOnKeyUp(KeyboardEventArgs e)
    {
        if (e.Key != "Enter" || !IsEditing)
            return;

        OnEditingFinished.InvokeAsync(PropertyValue);
    }
}

@{
    RenderFragment<object?> editValueRenderFragment = (object? value) => @<InputText @bind-Value="PropertyValue" @onkeyup="EditParamBadgeOnKeyUp" />;
}

<PropertyFilterBadgeComponent PropertyName="@PropertyName"
                              PropertyValue="@PropertyValue"
                              IsEditing="@IsEditing"
                              OnRemoveFilter="@OnRemoveFilter"
                              OnEditingRequested="@OnEditingRequested"
                              EditValueRenderFragment="@editValueRenderFragment" />